<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="shortcut icon" href="/images/tx.jpg"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title th:text="|${userCur.name}的微博_微博|">的主页</title>
    <meta name="keywords" content="司空琪个人微博,司空琪个人主页,司空琪空间,画江湖动漫"/>
    <meta name="description" content="司空琪个人微博,司空琪个人主页,司空琪空间说说,画江湖动漫"/>
    <meta name="updater" content="qheartq616"/>
    <style type="text/css">
        img.wp-smiley,
        img.emoji {
            display: inline !important;
            border: none !important;
            box-shadow: none !important;
            height: 1em !important;
            width: 1em !important;
            margin: 0 .07em !important;
            vertical-align: -0.1em !important;
            background: none !important;
            padding: 0 !important;
        }

        a {
            color: black;
            text-decoration: none;
        }

        a:hover {
            color: orange;
            text-decoration: none;
        }

        .setList ul li {
            margin-bottom: 3px;
        }
    </style>
    <link rel='stylesheet' th:href='@{/css/bootstrap.min.css}' type='text/css' media='all'/>
    <link rel='stylesheet' id='style-css' th:href='@{/css/style.css}' type='text/css' media='all'/>
    <link rel='stylesheet' id='lmlblog-css' th:href='@{/css/lmlblog.css}' type='text/css' media='all'/>
    <link rel='stylesheet' id='all-css' th:href='@{/css/all.css}' type='text/css' media='all'/>
    <link rel="stylesheet" type="text/css" href="/css/style-input.css">
    <link rel="stylesheet" href="/css/login.css"/>
    <script type='text/javascript' th:src='@{/js/jquery.min.js}'></script>
    <script type='text/javascript' th:src='@{/js/ueditor.all.min.js}'></script>
</head>
<body>
<!-- 菜单 -->
<div class="menu-bar">
    <div class="head_content">
        <h1 class="m-logo"><a href="/"></a></h1>
        <div id="nav" class="menu-menu-1-container">
            <ul id="menu-menu-1" class="menu">
                <li id="head_search"><i class="fa fa-search"></i></li>
                <li class="menu-item" style="margin-left: 3px;">
                    <form action="#" method="" style="display: inline-block; ">
                        <input type="search" style="display: inline-block;" class="search" placeholder="搜索框"/>
                    </form>
                </li>
                <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
                    <a th:href="@{|/main/all/1|}" style="text-decoration: none"><i
                            class="fa fa-home"></i>微博首页</a>
                </li>
                <!--<li class="menu-item"><a th:href="@{|/news/atme/${session.user.uid}/1|}" th:onclick="|lastUp(${session.user.uid})|"><i class="fa fa-envelope-o"></i>私信</a></li>-->
                <li class="menu-item"><a th:href="@{|/news/atme/${session.user.uid}/1|}"><i
                        class="fa fa-envelope-o"></i>私信</a></li>
                <li th:class="|gengxin menu-item menu-item-type-custom|" th:if="${userCur.uid==session.user.uid}">
                    <a th:href="@{|/user/${session.user.uid}/1|}" style="text-decoration: none">
                        <img th:src="|/avatar/${session.user.image}|"
                             style="height: 32px;width: 32px;position: relative;top: -3px;" class="avatar"/>
                        <span th:text="${session.user.name}" style="position: relative;top: -1px"></span>
                    </a>
                </li>
                <li th:class="|menu-item menu-item-type-custom|" th:if="${userCur.uid!=session.user.uid}">
                    <a th:href="@{|/user/${session.user.uid}/1|}" style="text-decoration: none">
                        <img th:src="|/avatar/${session.user.image}|"
                             style="height: 32px;width: 32px;position: relative;top: -3px;" class="avatar"/>
                        <span th:text="${session.user.name}" style="position: relative;top: -1px"></span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="head_user_info">
            <!--<ul>
                <li id="head_search"><i class="fa fa-search"></i></li>
                &lt;!&ndash; <li id="head_login" onclick="#1">登录</li>
                <span class="head_login_middle">or</span>
                <li id="head_reg" onclick="#1">注册</li> &ndash;&gt;</ul>-->
        </div>
        <div style="clear: both;"></div>
    </div>
</div><!-- menu-bar -->

<div style="clear: both;"></div>
<div class="lmlblog-member-main" data="1">
    <div class="lmlblog-member-bg">
        <div class="lmlblog-member-content">
            <div class="lmlblog-member-header">
                <div class="lmlblog-member-avatar other">
                    <img th:src="|/avatar/${userCur.image}|" class="avatar"/>
                    <i th:if="${userCur.status==0}" th:title="普通用户"></i>
                    <i th:if="${userCur.status==1}" class="lmlblog-verify lmlblog-verify-a" th:title="会员用户"></i>
                    <i th:if="${userCur.status==2}" class="lmlblog-verify lmlblog-verify-b" th:title="认证用户"></i>
                    <i th:if="${userCur.status==3}" class="lmlblog-verify-c lmlblog-verify-cc" th:title="超级管理员"></i>
                </div>
                <div class="lmlblog-member-username" th:switch="${userCur.gender}">
                    <h1 th:text="${userCur.name}"></h1>
                    <span class="lmlblog-mark lmlblog-boy" th:case="'男'"><i class="fa fa-mars"></i></span>
                    <span class="lmlblog-mark lmlblog-girl" th:case="'女'"><i class="fa fa-venus"></i></span>
                    <span class="lmlblog-mark" style="background-color: orange" th:case="*"><i
                            class="fa fa-transgender-alt"></i></span>
                    <!--<span class="lmlblog-mark lmlblog-lv" title="经验：3815"></span>
                    <span class="lmlblog-mark lmlblog-vip"></span></div>-->
                    <div class="lmlblog-member-desc" th:text="${userCur.description}">江湖风雨，几度阑珊。沧海一粟，愿君一剑轻安。</div>
                    <div class="lmlblog-member-follow-info" th:switch="${userCur.followStatus}" id="followInfo">
                        <a th:onclick="|javascript:doFollow(${session.user.uid},${userCur.uid})|" th:case="0"
                           target="_blank" rel="nofollow">
							<span class="follow no opacity">
								<i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;<i class="lmlblog-icon">关注</i>
							</span>
                        </a>
                        <a th:onclick="|javascript:doFollow(${session.user.uid},${userCur.uid})|" th:case="1"
                           target="_blank" rel="nofollow">
							<span class="follow has opacity">
								<i class="fa fa-check-square-o"></i><i class="lmlblog-icon">已关注</i>
							</span>
                        </a>
                        <a th:onclick="|javascript:doFollow(${session.user.uid},${userCur.uid})|" th:case="2"
                           target="_blank" rel="nofollow">
							<span class="follow has opacity">
								<i class="fa fa-exchange"></i><i class="lmlblog-icon">互相关注</i>
							</span>
                        </a>
                        <a th:onclick="|javascript:doFollow(${session.user.uid},${userCur.uid})|" th:case="4"
                           target="_blank" rel="nofollow">
							<span class="follow no opacity">
								<i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;<i class="lmlblog-icon">关注</i>
							</span>
                        </a>
                        <span class="opacity" th:if="${userCur.followStatus!=3}"><i class="fa fa-envelope-o"></i>&nbsp;&nbsp;<i
                                class="lmlblog-icon">私聊</i></span>
                    </div>
                </div>
            </div>
            <div class="lmlblog-member-menu clear">
                <li class="on"><a th:href="@{|/user/${session.user.uid}/1|}" target="_blank">主页</a></li>
                <li>动态</li>
                <li><a href="http://www.lmlblog.com/blog/sikongqi/3.html" target="_blank">音乐</a></li>
                <li>文章</li>
                <li><a href="http://www.lmlblog.com/blog/sikongqi/2.html" target="_blank">视频</a></li>
                <li><a href="http://www.lmlblog.com/blog/sikongqi/1.html" target="_blank">个人档</a></li>
            </div>
            <div class=" lmlblog-member-content-list clear" style="margin-top: 50px">
                <div class=" lmlblog-member-left">
                    <div class="lmlblog-member-left-profile">
                        <ul>
                            <li><h3>个人主页</h3></li>
                            <li><i class="fa fa-address-book-o"></i><a th:href="@{|/follow/${userCur.uid}/1|}">我的关注</a>
                            </li>
                            <li style="margin: 0px 20px">
                                <ul id="groups" th:each="group:${userCurGroup}">
                                    <li><a th:text="${group.name}"></a></li>
                                </ul>
                            </li>
                            <li th:if="${session.user.uid== userCur.uid}">
                                <a style="display:block;height:20px;line-height:20px;font-size:16px;text-align:center;"
                                   href="#" class="tbox"><span style="font-size: 16px">+</span>添加分组</a>
                            </li>
                            <li><i class="fa fa-smile-o"></i><a th:href="@{|/follow/${userCur.uid}/2|}">我的粉丝</a></li>
                        </ul>
                    </div>
                </div>
                <div class=" lmlblog-member-right">
                    <div class="lmlblog-post-list" th:each="user:${users}">
                        <div class="lmlblog-posts-list words" style="background-image:url(/images/058.png); "
                             data="4197">
                            <!-- 动态内容部分，包括列表 -->
                            <div class="lmlblog-post-user-info" style="display: inline-block">
                                <div class="lmlblog-post-user-info-avatar" user-data="1">
                                    <a th:href="@{|/user/${user.uid}/1|}" style="display: inline-block;">
                                        <span class="lmlblog-vip-icon"></span>
                                        <img th:src="|/avatar/${user.image}|" class="avatar"/>
                                        <i th:if="${user.status==0}" th:title="普通用户"></i>
                                        <i th:if="${user.status==1}" class="lmlblog-verify lmlblog-verify-a"
                                           th:title="会员用户"></i>
                                        <i th:if="${user.status==2}" class="lmlblog-verify lmlblog-verify-b"
                                           th:title="认证用户"></i>
                                        <i th:if="${user.status==3}" class="lmlblog-verify-c lmlblog-verify-cc"
                                           th:title="超级管理员"></i>
                                    </a>
                                    <div class="lmlblog-user-info-card">
                                        <div class="info_card_loading"><img style="margin-top: 70px" src="/picture/chat-loading.gif">
                                            <p>资料加载中...</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="lmlblog-post-user-info-name">
                                    <a th:href="@{|/user/${user.uid}/1|}" title="访问主页">
                                        <font style="color:#333;font-weight:600" th:text="${user.name}">司空琪</font>
                                    </a>
                                    <p style="margin: 8px auto"><a th:href="@{|/follow/${user.uid}/1|}">关注
                                        [[${user.countAllFollowUser}]] </a> | <a th:href="@{|/follow/${user.uid}/2|}">粉丝
                                        [[${user.countAllFans}]] </a> | <a th:href="@{|/user/${user.uid}/1|}">微博
                                        [[${user.countAllPost}]]</a></p>
                                    <p style="margin: 8px auto">地址 [[${user.city}]] </p>
                                </div>

                            </div><!-- 作者信息 -->
                            <!--<div >-->
                                <!--<button class="follow has opacity" style="background-color:darkgrey;width: 60px;height:30px " onmouseover="showList(this)">设置</button>-->
                                <!--<div class="setList" style="display: none;z-index: 99">-->
                                    <!--<ul>-->
                                        <!--<li><a>取消关注</a></li>-->
                                        <!--<li><a>设置分组</a></li>-->
                                        <!--<li><a>+特别关心</a></li>-->
                                        <!--<li><a>举报</a></li>-->
                                    <!--</ul>-->
                                <!--</div>-->
                            <!--</div>-->
                            <div class="lmlblog-post-content " style="margin-left:60px ">
                                <p th:utext="${user.description}"></p>
                            </div>

                            <div class="lmlblog-post-footer-bar">
                                <span>小尾巴</span><i class="lmlblog-icon" onclick="lmlblog_post_type_open();">&#xe62c;</i>
                            </div>

                        </div>
                        <!-- posts_list -->
                    </div>
                    <!--模态框-->
                    <div style="position: center; top: 400px " class="modal fade" id="myModal">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span></button>
                                </div>
                                <div class="modal-body">
                                    <h4 class="modal-title" align="center">自定义分组管理</h4>
                                    <br/>
                                    <ul>
                                        <li></li>
                                    </ul>
                                    <p><a th:onclick="addGroup()">添加分组</a></p>
                                    <!--<form id="addForm" th:action="@{|/group/add/${session.user.uid}|}" class="form-horizontal" role="form" style="display: none">-->
                                    <div style="display:none;" id="addForm">
                                        <div class="form-group">
                                            <label for="groupname"
                                                   class="col-sm-offset-2 col-sm-2 control-label">分组名称</label>
                                            <div class="col-sm-5">
                                                <input type="text" style="width: 100px" class="form-control"
                                                       name="groupName" id="groupname" placeholder="请输入标题">
                                            </div>
                                        </div>
                                        <!--<div class="form-group">-->
                                        <!--<label for="password" class="col-sm-offset-2 col-sm-2 control-label">密码</label>-->
                                        <!--<div class="col-sm-5">-->
                                        <!--<input type="password" class="form-control" id="password" placeholder="请输入您的密码">-->
                                        <!--</div>-->
                                        <!--</div>-->
                                        <div class="form-group">
                                            <div class="col-sm-offset-4 col-sm-5">
                                                <button id="submitBtn"
                                                        th:onclick="'javascript:doAddGroup('+${session.user.uid}+')'"
                                                        type="submit" class="btn btn-default btn-block btn-primary">添加分组
                                                </button>
                                            </div>
                                        </div>
                                        <!--</form>-->
                                    </div>
                                </div>
                            </div>
                            <!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->
                    <!--<div class="lmlblog-pager">-->
                    <!--<a class="lmlblog-pager-left" th:href="@{|/user/${userCur.uid}/${pageInfo.hasPreviousPage?pageInfo.prePage:1}|}">上一页</a>-->
                    <!--<div class="lmlblog-pager-center layui-form" th:text="|第${pageInfo.pageNum==0?1:pageInfo.pageNum}页|"></div>-->
                    <!--<a class="lmlblog-pager-right" th:href="@{|/user/${userCur.uid}/${pageInfo.hasNextPage?pageInfo.nextPage:pageInfo.navigateLastPage}|}">下一页</a>-->
                    <!--</div>-->
                </div>
            </div>

        </div>
    </div>
</div>
<!-- 底部 -->
<div style="clear:both"></div>
<div class="footer">
    <div class="footer_b_foot">
        <div class="footer_b_top">
        </div>
        <div class="footer_b_bottom">Design by 2017 画江湖杯莫停 司空琪个人主页 司空琪微博/空间/贴吧官博。Promoted by 2021
            红桃QHeartQ。内容源于网络搜集，仅学习、分享交流。
        </div>
    </div>
</div>
<!-- 返回顶部 -->
<a href="javascript:returnTop();" class="cd-top"></a>
</div>
<script type="text/javascript">
    var sdelay = 0;

    function returnTop() {
        window.scrollBy(0, -100);//Only for y vertical-axis
        if (document.body.scrollTop > 0) {
            sdelay = setTimeout('returnTop()', 50);
        }
    }
</script>

</body>

<script type='text/javascript' th:src='@{/js/base.js}'></script>
<script type='text/javascript' th:src='@{/js/all.js}'></script>
<script type='text/javascript' th:src='@{/js/plupload.full.min.js}'></script>
<script type='text/javascript' th:src='@{/js/layui.js}'></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<script>

    function doAddGroup(uid) {
        var groupName = $("#groupname").val()
        $.ajax({
            type: 'post',
            url: '/group/add/' + uid,
            data: {
                groupName: groupName
            },
            dataType: 'json',
            success: function (data) {
                console.log(data)
                if (data.code === 631548) {
                    $(".close").click()
                    $("#groups").append("<li><a>" + groupName + "</a></li>")
                } else {
                    alert("添加分组失败")
                }

            },
            error: function (data) {
                alert("请求失败")
            },
        })
    }

    function addGroup() {

        $("#addForm").css({"display": "block"})

        $(".modal-body").html($("#addForm").html())
    }

    $(function () {

        $(".tbox").click(function () {
            $('#myModal').modal('show') //显示模态框
        })

    });

    function showList(d) {
        $(".setList").css({"display": "block"});
        $(".setList").mouseover(function () {
            $(".setList").css({"display": "block"});
            $(".setList").mouseout(function () {
                $(".setList").css("display", "none");
            })
        })
        $(d).mouseout(function () {
            $(".setList").css({"display": "none", "z-index": "99"});
        })
    }

    function showImg(d) {
        $(d).css("display", "block");
    }

    function hideImg(d) {
        $(d).css("display", "block");
    }

    jQuery(document).ready(function ($) {
        $.fn.smartFloat = function () {
            var position = function (element) {
                var top = element.position().top,
                    pos = element.css("position");
                $(window).scroll(function () {
                    var scrolls = $(this).scrollTop();
                    if (scrolls > top) {
                        if (window.XMLHttpRequest) {
                            element.css({
                                position: "fixed",
                                top: 0
                            });
                        } else {
                            element.css({
                                top: scrolls
                            });
                        }
                    } else {
                        element.css({
                            position: "absolute",
                            top: top
                        });
                    }
                });
            };
            return $(this).each(function () {
                position($(this));
            });
        };
        $(".lmlblog-member-left-bg-xg").smartFloat();
    });

    function doLike(pid, uid, d) {
        //alert("22");
        $.post(
            "/user/" + uid + "/doLike",
            "pid=" + pid + "&uid=" + uid,
            function (data) {
                //alert("33");
                //应该还需要去改变post.like的值
                //alert(data);
                var a = $("#post" + pid + "0").text();
                var b = parseInt($(d).children().eq(1).text());
                var h = "<i className='fa fa-heart'></i>";
                var ho = "<i className='fa fa-heart-o'></i>";
                //alert(b);
                //alert(b-1);
                //alert(!data);
                if (!data) {
                    $(d).children().eq(0).removeClass("fa fa-heart");
                    $(d).children().eq(0).addClass("fa fa-heart-o");
                    $(d).children().eq(1).text(b - 1);
                } else {
                    $(d).children().eq(0).removeClass("fa fa-heart-o");
                    $(d).children().eq(0).addClass("fa fa-heart");
                    $(d).children().eq(1).text(b + 1);
                }
            },
            "json"
        )
    }
</script>
</html>